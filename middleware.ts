import{NextResponse}from"next/server";export function middleware(request){const{pathname,search}=request.nextUrl;if(pathname.startsWith("/_next/")||pathname.startsWith("/css/")||pathname.startsWith("/img/")||pathname.startsWith("/favicon")||pathname.startsWith("/fonts/")||pathname.startsWith("/media/")||pathname==="/robots.txt"||pathname==="/sitemap.xml"){return NextResponse.next()}const c=request.cookies.get("deviceType")?.value;if(c==="desktop")return NextResponse.rewrite(new URL(`${pathname}${search}`,"https://desktop.peur-de-la-conduite.fr"));return NextResponse.rewrite(new URL(`${pathname}${search}`,"https://mobile.peur-de-la-conduite.fr"))}export const config={matcher:["/:path*"]};
