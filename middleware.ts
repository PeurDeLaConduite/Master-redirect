import{NextResponse as e,NextRequest }from"next/server";export function middleware(t:NextRequest){let{pathname:i,search:r}=t.nextUrl;if("/robots.txt"===i||"/sitemap.xml"===i||"/favicon.ico"===i)return e.next();let o=t.headers.get("user-agent")||"",n=/(iPad|Tablet)/i.test(o)||/(Android)/i.test(o)&&!/Mobile/i.test(o)||!/(Android)/i.test(o),d=!n&&/Mobi|Android|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(o),s=new URL(`${i}${r}`,`https://${d?"mobile.peur-de-la-conduite.fr":"desktop.peur-de-la-conduite.fr"}`),a=e.rewrite(s);return a.cookies.set("deviceType",d?"mobile":"desktop",{path:"/",domain:".peur-de-la-conduite.fr",httpOnly:!0,secure:!0,sameSite:"strict"}),a}export const config={matcher:"/:path*"};