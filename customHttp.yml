# customHttp.yml — à la racine du dépôt
customHeaders:
    # Fonts WOFF2 — 1 an
    - pattern: "/media/**/*.woff2"
      headers:
          - key: Cache-Control
            value: "public, max-age=31536000, s-maxage=31536000, immutable"
          - key: Access-Control-Allow-Origin
            value: "*"
          - key: Cross-Origin-Resource-Policy
            value: "cross-origin"

    # SVG — 1 an
    - pattern: "/img/**/*.svg"
      headers:
          - key: Cache-Control
            value: "public, max-age=31536000, s-maxage=31536000, immutable"
          - key: Access-Control-Allow-Origin
            value: "*"
          - key: Cross-Origin-Resource-Policy
            value: "cross-origin"

    # Toutes images du dossier /img — 1 an
    - pattern: "/img/**"
      headers:
          - key: Cache-Control
            value: "public, max-age=31536000, s-maxage=31536000, immutable"
          - key: Access-Control-Allow-Origin
            value: "*"
          - key: Cross-Origin-Resource-Policy
            value: "cross-origin"

    # Chunks JS hashés — 1 an
    - pattern: "/chunks/**"
      headers:
          - key: Cache-Control
            value: "public, max-age=31536000, s-maxage=31536000, immutable"

    # CSS global — 17 jours (~1 468 800 s)
    - pattern: "/css/globals.css"
      headers:
          - key: Cache-Control
            value: "public, max-age=1468800, s-maxage=1468800, stale-while-revalidate=86400"

    # CSS mobile/desktop defer — 1 h
    - pattern: "/css/mobileDefer.css"
      headers:
          - key: Cache-Control
            value: "public, max-age=3600, s-maxage=3600, must-revalidate"
    - pattern: "/css/desktopDefer.css"
      headers:
          - key: Cache-Control
            value: "public, max-age=3600, s-maxage=3600, must-revalidate"
