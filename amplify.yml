version: 1

frontend:
    phases:
        build:
            commands:
                - export NEXT_TELEMETRY_DISABLED=1
                - yarn build
    artifacts:
        baseDirectory: .next
        files:
            - "**/*"
    cache:
        paths:
            - .next/cache/**/*
            - .npm/**/*
            - node_modules/**/*

    customHeaders:
        - pattern: "/*" # ou "/*" pour ouvrir tout le site
          headers:
              - key: "Access-Control-Allow-Origin"
                value: "https://mobile.peur-de-la-conduite.fr"
              - key: "Access-Control-Allow-Credentials"
                value: "true"
              - key: "Access-Control-Allow-Methods"
                value: "GET,POST,OPTIONS"
              - key: "Access-Control-Allow-Headers"
                value: "Content-Type,Authorization"
